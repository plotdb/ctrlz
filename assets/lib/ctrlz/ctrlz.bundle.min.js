require=function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r}()({1:[function(require,module,exports){module.exports=bootstrapTransform;function bootstrapTransform(type,transformComponent,checkValidOp,append){var transformComponentX=function(left,right,destLeft,destRight){transformComponent(destLeft,left,right,"left");transformComponent(destRight,right,left,"right")};var transformX=type.transformX=function(leftOp,rightOp){checkValidOp(leftOp);checkValidOp(rightOp);var newRightOp=[];for(var i=0;i<rightOp.length;i++){var rightComponent=rightOp[i];var newLeftOp=[];var k=0;while(k<leftOp.length){var nextC=[];transformComponentX(leftOp[k],rightComponent,newLeftOp,nextC);k++;if(nextC.length===1){rightComponent=nextC[0]}else if(nextC.length===0){for(var j=k;j<leftOp.length;j++){append(newLeftOp,leftOp[j])}rightComponent=null;break}else{var pair=transformX(leftOp.slice(k),nextC);for(var l=0;l<pair[0].length;l++){append(newLeftOp,pair[0][l])}for(var r=0;r<pair[1].length;r++){append(newRightOp,pair[1][r])}rightComponent=null;break}}if(rightComponent!=null){append(newRightOp,rightComponent)}leftOp=newLeftOp}return[leftOp,newRightOp]};type.transform=function(op,otherOp,type){if(!(type==="left"||type==="right"))throw new Error("type must be 'left' or 'right'");if(otherOp.length===0)return op;if(op.length===1&&otherOp.length===1)return transformComponent([],op[0],otherOp[0],type);if(type==="left")return transformX(op,otherOp)[0];else return transformX(otherOp,op)[1]}}},{}],2:[function(require,module,exports){var isArray=function(obj){return Object.prototype.toString.call(obj)=="[object Array]"};var isObject=function(obj){return!!obj&&obj.constructor===Object};var clone=function(o){return JSON.parse(JSON.stringify(o))};var json={name:"json0",uri:"http://sharejs.org/types/JSONv0"};var subtypes={};json.registerSubtype=function(subtype){subtypes[subtype.name]=subtype};json.create=function(data){return data===undefined?null:clone(data)};json.invertComponent=function(c){var c_={p:c.p};if(c.t&&subtypes[c.t]){c_.t=c.t;c_.o=subtypes[c.t].invert(c.o)}if(c.si!==void 0)c_.sd=c.si;if(c.sd!==void 0)c_.si=c.sd;if(c.oi!==void 0)c_.od=c.oi;if(c.od!==void 0)c_.oi=c.od;if(c.li!==void 0)c_.ld=c.li;if(c.ld!==void 0)c_.li=c.ld;if(c.na!==void 0)c_.na=-c.na;if(c.lm!==void 0){c_.lm=c.p[c.p.length-1];c_.p=c.p.slice(0,c.p.length-1).concat([c.lm])}return c_};json.invert=function(op){var op_=op.slice().reverse();var iop=[];for(var i=0;i<op_.length;i++){iop.push(json.invertComponent(op_[i]))}return iop};json.checkValidOp=function(op){for(var i=0;i<op.length;i++){if(!isArray(op[i].p))throw new Error("Missing path")}};json.checkList=function(elem){if(!isArray(elem))throw new Error("Referenced element not a list")};json.checkObj=function(elem){if(!isObject(elem)){throw new Error("Referenced element not an object (it was "+JSON.stringify(elem)+")")}};function convertFromText(c){c.t="text0";var o={p:c.p.pop()};if(c.si!=null)o.i=c.si;if(c.sd!=null)o.d=c.sd;c.o=[o]}function convertToText(c){c.p.push(c.o[0].p);if(c.o[0].i!=null)c.si=c.o[0].i;if(c.o[0].d!=null)c.sd=c.o[0].d;delete c.t;delete c.o}json.apply=function(snapshot,op){json.checkValidOp(op);op=clone(op);var container={data:snapshot};for(var i=0;i<op.length;i++){var c=op[i];if(c.si!=null||c.sd!=null)convertFromText(c);var parent=null;var parentKey=null;var elem=container;var key="data";for(var j=0;j<c.p.length;j++){var p=c.p[j];parent=elem;parentKey=key;elem=elem[key];key=p;if(parent==null)throw new Error("Path invalid")}if(c.t&&c.o!==void 0&&subtypes[c.t]){elem[key]=subtypes[c.t].apply(elem[key],c.o)}else if(c.na!==void 0){if(typeof elem[key]!="number")throw new Error("Referenced element not a number");elem[key]+=c.na}else if(c.li!==void 0&&c.ld!==void 0){json.checkList(elem);elem[key]=c.li}else if(c.li!==void 0){json.checkList(elem);elem.splice(key,0,c.li)}else if(c.ld!==void 0){json.checkList(elem);elem.splice(key,1)}else if(c.lm!==void 0){json.checkList(elem);if(c.lm!=key){var e=elem[key];elem.splice(key,1);elem.splice(c.lm,0,e)}}else if(c.oi!==void 0){json.checkObj(elem);elem[key]=c.oi}else if(c.od!==void 0){json.checkObj(elem);delete elem[key]}else{throw new Error("invalid / missing instruction in op")}}return container.data};json.shatter=function(op){var results=[];for(var i=0;i<op.length;i++){results.push([op[i]])}return results};json.incrementalApply=function(snapshot,op,_yield){for(var i=0;i<op.length;i++){var smallOp=[op[i]];snapshot=json.apply(snapshot,smallOp);_yield(smallOp,snapshot)}return snapshot};var pathMatches=json.pathMatches=function(p1,p2,ignoreLast){if(p1.length!=p2.length)return false;for(var i=0;i<p1.length;i++){if(p1[i]!==p2[i]&&(!ignoreLast||i!==p1.length-1))return false}return true};json.append=function(dest,c){c=clone(c);if(dest.length===0){dest.push(c);return}var last=dest[dest.length-1];if((c.si!=null||c.sd!=null)&&(last.si!=null||last.sd!=null)){convertFromText(c);convertFromText(last)}if(pathMatches(c.p,last.p)){if(c.t&&last.t&&c.t===last.t&&subtypes[c.t]){last.o=subtypes[c.t].compose(last.o,c.o);if(c.si!=null||c.sd!=null){var p=c.p;for(var i=0;i<last.o.length-1;i++){c.o=[last.o.pop()];c.p=p.slice();convertToText(c);dest.push(c)}convertToText(last)}}else if(last.na!=null&&c.na!=null){dest[dest.length-1]={p:last.p,na:last.na+c.na}}else if(last.li!==undefined&&c.li===undefined&&c.ld===last.li){if(last.ld!==undefined){delete last.li}else{dest.pop()}}else if(last.od!==undefined&&last.oi===undefined&&c.oi!==undefined&&c.od===undefined){last.oi=c.oi}else if(last.oi!==undefined&&c.od!==undefined){if(c.oi!==undefined){last.oi=c.oi}else if(last.od!==undefined){delete last.oi}else{dest.pop()}}else if(c.lm!==undefined&&c.p[c.p.length-1]===c.lm){}else{dest.push(c)}}else{if((c.si!=null||c.sd!=null)&&(last.si!=null||last.sd!=null)){convertToText(c);convertToText(last)}dest.push(c)}};json.compose=function(op1,op2){json.checkValidOp(op1);json.checkValidOp(op2);var newOp=clone(op1);for(var i=0;i<op2.length;i++){json.append(newOp,op2[i])}return newOp};json.normalize=function(op){var newOp=[];op=isArray(op)?op:[op];for(var i=0;i<op.length;i++){var c=op[i];if(c.p==null)c.p=[];json.append(newOp,c)}return newOp};json.commonLengthForOps=function(a,b){var alen=a.p.length;var blen=b.p.length;if(a.na!=null||a.t)alen++;if(b.na!=null||b.t)blen++;if(alen===0)return-1;if(blen===0)return null;alen--;blen--;for(var i=0;i<alen;i++){var p=a.p[i];if(i>=blen||p!==b.p[i])return null}return alen};json.canOpAffectPath=function(op,path){return json.commonLengthForOps({p:path},op)!=null};json.transformComponent=function(dest,c,otherC,type){c=clone(c);var common=json.commonLengthForOps(otherC,c);var common2=json.commonLengthForOps(c,otherC);var cplength=c.p.length;var otherCplength=otherC.p.length;if(c.na!=null||c.t)cplength++;if(otherC.na!=null||otherC.t)otherCplength++;if(common2!=null&&otherCplength>cplength&&c.p[common2]==otherC.p[common2]){if(c.ld!==void 0){var oc=clone(otherC);oc.p=oc.p.slice(cplength);c.ld=json.apply(clone(c.ld),[oc])}else if(c.od!==void 0){var oc=clone(otherC);oc.p=oc.p.slice(cplength);c.od=json.apply(clone(c.od),[oc])}}if(common!=null){var commonOperand=cplength==otherCplength;var oc=otherC;if((c.si!=null||c.sd!=null)&&(otherC.si!=null||otherC.sd!=null)){convertFromText(c);oc=clone(otherC);convertFromText(oc)}if(oc.t&&subtypes[oc.t]){if(c.t&&c.t===oc.t){var res=subtypes[c.t].transform(c.o,oc.o,type);if(c.si!=null||c.sd!=null){var p=c.p;for(var i=0;i<res.length;i++){c.o=[res[i]];c.p=p.slice();convertToText(c);json.append(dest,c)}}else if(!isArray(res)||res.length>0){c.o=res;json.append(dest,c)}return dest}}else if(otherC.na!==void 0){}else if(otherC.li!==void 0&&otherC.ld!==void 0){if(otherC.p[common]===c.p[common]){if(!commonOperand){return dest}else if(c.ld!==void 0){if(c.li!==void 0&&type==="left"){c.ld=clone(otherC.li)}else{return dest}}}}else if(otherC.li!==void 0){if(c.li!==void 0&&c.ld===undefined&&commonOperand&&c.p[common]===otherC.p[common]){if(type==="right")c.p[common]++}else if(otherC.p[common]<=c.p[common]){c.p[common]++}if(c.lm!==void 0){if(commonOperand){if(otherC.p[common]<=c.lm)c.lm++}}}else if(otherC.ld!==void 0){if(c.lm!==void 0){if(commonOperand){if(otherC.p[common]===c.p[common]){return dest}var p=otherC.p[common];var from=c.p[common];var to=c.lm;if(p<to||p===to&&from<to)c.lm--}}if(otherC.p[common]<c.p[common]){c.p[common]--}else if(otherC.p[common]===c.p[common]){if(otherCplength<cplength){return dest}else if(c.ld!==void 0){if(c.li!==void 0){delete c.ld}else{return dest}}}}else if(otherC.lm!==void 0){if(c.lm!==void 0&&cplength===otherCplength){var from=c.p[common];var to=c.lm;var otherFrom=otherC.p[common];var otherTo=otherC.lm;if(otherFrom!==otherTo){if(from===otherFrom){if(type==="left"){c.p[common]=otherTo;if(from===to)c.lm=otherTo}else{return dest}}else{if(from>otherFrom)c.p[common]--;if(from>otherTo)c.p[common]++;else if(from===otherTo){if(otherFrom>otherTo){c.p[common]++;if(from===to)c.lm++}}if(to>otherFrom){c.lm--}else if(to===otherFrom){if(to>from)c.lm--}if(to>otherTo){c.lm++}else if(to===otherTo){if(otherTo>otherFrom&&to>from||otherTo<otherFrom&&to<from){if(type==="right")c.lm++}else{if(to>from)c.lm++;else if(to===otherFrom)c.lm--}}}}}else if(c.li!==void 0&&c.ld===undefined&&commonOperand){var from=otherC.p[common];var to=otherC.lm;p=c.p[common];if(p>from)c.p[common]--;if(p>to)c.p[common]++}else{var from=otherC.p[common];var to=otherC.lm;p=c.p[common];if(p===from){c.p[common]=to}else{if(p>from)c.p[common]--;if(p>to)c.p[common]++;else if(p===to&&from>to)c.p[common]++}}}else if(otherC.oi!==void 0&&otherC.od!==void 0){if(c.p[common]===otherC.p[common]){if(c.oi!==void 0&&commonOperand){if(type==="right"){return dest}else{c.od=otherC.oi}}else{return dest}}}else if(otherC.oi!==void 0){if(c.oi!==void 0&&c.p[common]===otherC.p[common]){if(type==="left"){json.append(dest,{p:c.p,od:otherC.oi})}else{return dest}}}else if(otherC.od!==void 0){if(c.p[common]==otherC.p[common]){if(!commonOperand)return dest;if(c.oi!==void 0){delete c.od}else{return dest}}}}json.append(dest,c);return dest};require("./bootstrapTransform")(json,json.transformComponent,json.checkValidOp,json.append);var text=require("./text0");json.registerSubtype(text);module.exports=json},{"./bootstrapTransform":1,"./text0":3}],3:[function(require,module,exports){var text=module.exports={name:"text0",uri:"http://sharejs.org/types/textv0",create:function(initial){if(initial!=null&&typeof initial!=="string"){throw new Error("Initial data must be a string")}return initial||""}};var strInject=function(s1,pos,s2){return s1.slice(0,pos)+s2+s1.slice(pos)};var checkValidComponent=function(c){if(typeof c.p!=="number")throw new Error("component missing position field");if(typeof c.i==="string"===(typeof c.d==="string"))throw new Error("component needs an i or d field");if(c.p<0)throw new Error("position cannot be negative")};var checkValidOp=function(op){for(var i=0;i<op.length;i++){checkValidComponent(op[i])}};text.apply=function(snapshot,op){var deleted;checkValidOp(op);for(var i=0;i<op.length;i++){var component=op[i];if(component.i!=null){snapshot=strInject(snapshot,component.p,component.i)}else{deleted=snapshot.slice(component.p,component.p+component.d.length);if(component.d!==deleted)throw new Error("Delete component '"+component.d+"' does not match deleted text '"+deleted+"'");snapshot=snapshot.slice(0,component.p)+snapshot.slice(component.p+component.d.length)}}return snapshot};var append=text._append=function(newOp,c){if(c.i===""||c.d==="")return;if(newOp.length===0){newOp.push(c)}else{var last=newOp[newOp.length-1];if(last.i!=null&&c.i!=null&&last.p<=c.p&&c.p<=last.p+last.i.length){newOp[newOp.length-1]={i:strInject(last.i,c.p-last.p,c.i),p:last.p}}else if(last.d!=null&&c.d!=null&&c.p<=last.p&&last.p<=c.p+c.d.length){newOp[newOp.length-1]={d:strInject(c.d,last.p-c.p,last.d),p:c.p}}else{newOp.push(c)}}};text.compose=function(op1,op2){checkValidOp(op1);checkValidOp(op2);var newOp=op1.slice();for(var i=0;i<op2.length;i++){append(newOp,op2[i])}return newOp};text.normalize=function(op){var newOp=[];if(op.i!=null||op.p!=null)op=[op];for(var i=0;i<op.length;i++){var c=op[i];if(c.p==null)c.p=0;append(newOp,c)}return newOp};var transformPosition=function(pos,c,insertAfter){if(c.i!=null){if(c.p<pos||c.p===pos&&insertAfter){return pos+c.i.length}else{return pos}}else{if(pos<=c.p){return pos}else if(pos<=c.p+c.d.length){return c.p}else{return pos-c.d.length}}};text.transformCursor=function(position,op,side){var insertAfter=side==="right";for(var i=0;i<op.length;i++){position=transformPosition(position,op[i],insertAfter)}return position};var transformComponent=text._tc=function(dest,c,otherC,side){checkValidComponent(c);checkValidComponent(otherC);if(c.i!=null){append(dest,{i:c.i,p:transformPosition(c.p,otherC,side==="right")})}else{if(otherC.i!=null){var s=c.d;if(c.p<otherC.p){append(dest,{d:s.slice(0,otherC.p-c.p),p:c.p});s=s.slice(otherC.p-c.p)}if(s!=="")append(dest,{d:s,p:c.p+otherC.i.length})}else{if(c.p>=otherC.p+otherC.d.length)append(dest,{d:c.d,p:c.p-otherC.d.length});else if(c.p+c.d.length<=otherC.p)append(dest,c);else{var newC={d:"",p:c.p};if(c.p<otherC.p)newC.d=c.d.slice(0,otherC.p-c.p);if(c.p+c.d.length>otherC.p+otherC.d.length)newC.d+=c.d.slice(otherC.p+otherC.d.length-c.p);var intersectStart=Math.max(c.p,otherC.p);var intersectEnd=Math.min(c.p+c.d.length,otherC.p+otherC.d.length);var cIntersect=c.d.slice(intersectStart-c.p,intersectEnd-c.p);var otherIntersect=otherC.d.slice(intersectStart-otherC.p,intersectEnd-otherC.p);if(cIntersect!==otherIntersect)throw new Error("Delete ops delete different text in the same region of the document");if(newC.d!==""){newC.p=transformPosition(newC.p,otherC);append(dest,newC)}}}}return dest};var invertComponent=function(c){return c.i!=null?{d:c.i,p:c.p}:{i:c.d,p:c.p}};text.invert=function(op){op=op.slice().reverse();for(var i=0;i<op.length;i++){op[i]=invertComponent(op[i])}return op};require("./bootstrapTransform")(text,transformComponent,checkValidOp,append)},{"./bootstrapTransform":1}],"ot-json0":[function(require,module,exports){module.exports={type:require("./json0")}},{"./json0":2}]},{},[]);
require=function(t){var e=function e(r,o){return e.m.hasOwnProperty(r)?e.m[r]:"function"!=typeof t||o?"function"==typeof e.r?e.r(r,1):void 0:t(r,1)};e.m={},e.r=t;var r,o,n,i=(r=function(t,e){"use strict";var r=Object.prototype.toString;t.exports=function(t){var e=r.call(t),o="[object Arguments]"===e;return o||(o="[object Array]"!==e&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===r.call(t.callee)),o}},function(t){return o||r(o={exports:{},parent:t},o.exports),o.exports});if(!Object.keys){var p=Object.prototype.hasOwnProperty,y=Object.prototype.toString,a=i({}),f=Object.prototype.propertyIsEnumerable,c=!f.call({toString:null},"toString"),l=f.call(function(){},"prototype"),u=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=function(t){var e=t.constructor;return e&&e.prototype===t},s={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},b=function(){if("undefined"==typeof window){return!1}for(var t in window){try{if(!s["$"+t]&&p.call(window,t)&&null!==window[t]&&"object"==typeof window[t]){try{d(window[t])}catch(o){return!0}}}catch(o){return!0}}return!1}();n=function(t){var e=null!==t&&"object"==typeof t,r="[object Function]"===y.call(t),n=a(t),i=e&&"[object String]"===y.call(t),f=[];if(!e&&!r&&!n){throw new TypeError("Object.keys called on a non-object")}var s=l&&r;if(i&&t.length>0&&!p.call(t,0)){for(var g=0;g<t.length;++g){f.push(String(g))}}if(n&&t.length>0){for(var v=0;v<t.length;++v){f.push(String(v))}}else{for(var h in t){s&&"prototype"===h||!p.call(t,h)||f.push(String(h))}}if(c){for(var m=function(t){if("undefined"==typeof window||!b){return d(t)}try{return d(t)}catch(o){return!1}}(t),A=0;A<u.length;++A){m&&"constructor"===u[A]||!p.call(t,u[A])||f.push(u[A])}}return f}}var g=n,v={},h=Array.prototype.slice,m=i({}),A=Object.keys,S=A?function(t){return A(t)}:g,P=Object.keys;S.shim=function(){return Object.keys?function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2)||(Object.keys=function(t){return m(t)?P(h.call(t)):P(t)}):Object.keys=S,Object.keys||S},v=S;var j={},O="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,w=Object.prototype.toString,E=function(t){return!(O&&t&&"object"==typeof t&&Symbol.toStringTag in t)&&"[object Arguments]"===w.call(t)},I=function(t){return!!E(t)||null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Array]"!==w.call(t)&&"[object Function]"===w.call(t.callee)},F=function(){return E(arguments)}();E.isLegacyArguments=I,j=F?E:I;var U=function(t){return t!=t},k=function(t,e){return 0===t&&0===e?1/t==1/e:t===e||!(!U(t)||!U(e))},x=Array.prototype.slice,R=Object.prototype.toString,D=Function.prototype.bind||function(t){var e=this;if("function"!=typeof e||"[object Function]"!==R.call(e)){throw new TypeError("Function.prototype.bind called on incompatible "+e)}for(var r,o=x.call(arguments,1),n=Math.max(0,e.length-o.length),i=[],p=0;p<n;p++){i.push("$"+p)}if(r=Function("binder","return function ("+i.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof r){var n=e.apply(this,o.concat(x.call(arguments)));return Object(n)===n?n:this}return e.apply(t,o.concat(x.call(arguments)))}),e.prototype){var y=function(){};y.prototype=e.prototype,r.prototype=new y,y.prototype=null}return r},$=D.call(Function.call,Object.prototype.hasOwnProperty),T=RegExp.prototype.exec,M=Object.getOwnPropertyDescriptor,_=Object.prototype.toString,B="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,N=function(t){if(!t||"object"!=typeof t){return!1}if(!B){return"[object RegExp]"===_.call(t)}var e=M(t,"lastIndex");return!(!e||!$(e,"value"))&&function(t){try{var e=t.lastIndex;return t.lastIndex=0,T.call(t),!0}catch(o){return!1}finally{t.lastIndex=e}}(t)},W={},C="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),G=Object.prototype.toString,J=Array.prototype.concat,V=Object.defineProperty,q=V&&function(){var t={};try{for(var e in V(t,"x",{enumerable:!1,value:t}),t){return!1}return t.x===t}catch(o){return!1}}(),L=function(t,e,r,o){var n;e in t&&("function"!=typeof(n=o)||"[object Function]"!==G.call(n)||!o())||(q?V(t,e,{configurable:!0,enumerable:!1,value:r,writable:!0}):t[e]=r)},z=function(t,e){var r=arguments.length>2?arguments[2]:{},o=v(e);C&&(o=J.call(o,Object.getOwnPropertySymbols(e)));for(var n=0;n<o.length;n+=1){L(t,o[n],e[o[n]],r[o[n]])}};z.supportsDescriptors=!!q,W=z;var H={};(function(t){"use strict";var e=t.Symbol;H=function(){return"function"==typeof e&&"function"==typeof Symbol&&"symbol"==typeof e("foo")&&"symbol"==typeof Symbol("bar")&&function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols){return!1}if("symbol"==typeof Symbol.iterator){return!0}var t={},e=Symbol("test"),r=Object(e);if("string"==typeof e){return!1}if("[object Symbol]"!==Object.prototype.toString.call(e)){return!1}if("[object Symbol]"!==Object.prototype.toString.call(r)){return!1}for(e in t[e]=42,t){return!1}if("function"==typeof Object.keys&&0!==Object.keys(t).length){return!1}if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length){return!1}var o=Object.getOwnPropertySymbols(t);if(1!==o.length||o[0]!==e){return!1}if(!Object.prototype.propertyIsEnumerable.call(t,e)){return!1}if("function"==typeof Object.getOwnPropertyDescriptor){var n=Object.getOwnPropertyDescriptor(t,e);if(42!==n.value||!0!==n.enumerable){return!1}}return!0}()}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var X=TypeError,Y=Object.getOwnPropertyDescriptor;if(Y){try{Y({},"")}catch(o){Y=null}}var Q,K=function(){throw new X},Z=Y?function(){try{return arguments.callee,K}catch(t){try{return Y(arguments,"callee").get}catch(e){return K}}}():K,tt=H(),et=Object.getPrototypeOf||function(t){return t.__proto__},rt="undefined"==typeof Uint8Array?void 0:et(Uint8Array),ot={"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":tt?et([][Symbol.iterator]()):void 0,"%ArrayPrototype%":Array.prototype,"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":void 0,"%AsyncFunctionPrototype%":void 0,"%AsyncGenerator%":void 0,"%AsyncGeneratorFunction%":void 0,"%AsyncGeneratorPrototype%":void 0,"%AsyncIteratorPrototype%":void 0,"%Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":"undefined"==typeof DataView?void 0:DataView,"%DataViewPrototype%":"undefined"==typeof DataView?void 0:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"%Float32ArrayPrototype%":"undefined"==typeof Float32Array?void 0:Float32Array.prototype,"%Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"%Float64ArrayPrototype%":"undefined"==typeof Float64Array?void 0:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":void 0,"%GeneratorFunction%":void 0,"%GeneratorPrototype%":void 0,"%Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"%Int8ArrayPrototype%":"undefined"==typeof Int8Array?void 0:Int8Array.prototype,"%Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"%Int16ArrayPrototype%":"undefined"==typeof Int16Array?void 0:Int8Array.prototype,"%Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"%Int32ArrayPrototype%":"undefined"==typeof Int32Array?void 0:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":tt?et(et([][Symbol.iterator]())):void 0,"%JSON%":"object"==typeof JSON?JSON:void 0,"%JSONParse%":"object"==typeof JSON?JSON.parse:void 0,"%Map%":"undefined"==typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&tt?et((new Map)[Symbol.iterator]()):void 0,"%MapPrototype%":"undefined"==typeof Map?void 0:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?void 0:Promise,"%PromisePrototype%":"undefined"==typeof Promise?void 0:Promise.prototype,"%PromiseProto_then%":"undefined"==typeof Promise?void 0:Promise.prototype.then,"%Promise_all%":"undefined"==typeof Promise?void 0:Promise.all,"%Promise_reject%":"undefined"==typeof Promise?void 0:Promise.reject,"%Promise_resolve%":"undefined"==typeof Promise?void 0:Promise.resolve,"%Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":"undefined"==typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&tt?et((new Set)[Symbol.iterator]()):void 0,"%SetPrototype%":"undefined"==typeof Set?void 0:Set.prototype,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%SharedArrayBufferPrototype%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":tt?et(""[Symbol.iterator]()):void 0,"%StringPrototype%":String.prototype,"%Symbol%":tt?Symbol:void 0,"%SymbolPrototype%":tt?Symbol.prototype:void 0,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":Z,"%TypedArray%":rt,"%TypedArrayPrototype%":rt?rt.prototype:void 0,"%TypeError%":X,"%TypeErrorPrototype%":X.prototype,"%Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"%Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?void 0:Uint8Array.prototype,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray.prototype,"%Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"%Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?void 0:Uint16Array.prototype,"%Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"%Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?void 0:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"%WeakMapPrototype%":"undefined"==typeof WeakMap?void 0:WeakMap.prototype,"%WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet,"%WeakSetPrototype%":"undefined"==typeof WeakSet?void 0:WeakSet.prototype},nt=D.call(Function.call,String.prototype.replace),it=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,pt=/\\(\\)?/g,yt=function(t,e){if("string"!=typeof t||0===t.length){throw new TypeError("intrinsic name must be a non-empty string")}if(arguments.length>1&&"boolean"!=typeof e){throw new TypeError('"allowMissing" argument must be a boolean')}for(var r,o=(r=[],nt(t,it,function(t,e,o,n){r[r.length]=o?nt(n,pt,"$1"):e||t}),r),n=function(t,e){if(!(t in ot)){throw new SyntaxError("intrinsic "+t+" does not exist!")}if(void 0===ot[t]&&!e){throw new X("intrinsic "+t+" exists, but is not available. Please file an issue!")}return ot[t]}("%"+(o.length>0?o[0]:"")+"%",e),i=1;i<o.length;i+=1){if(null!=n){if(Y&&i+1>=o.length){var p=Y(n,o[i]);n=p?p.get||p.value:n[o[i]]}else{n=n[o[i]]}}}return n}("%Function%"),at=yt.apply,ft=yt.call;(Q=function(){return D.apply(ft,arguments)}).apply=function(){return D.apply(at,arguments)};var ct=Object,lt=TypeError,ut=function(){if(null!=this&&this!==ct(this)){throw new lt("RegExp.prototype.flags getter called on non-object")}var t="";return this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.dotAll&&(t+="s"),this.unicode&&(t+="u"),this.sticky&&(t+="y"),t},dt=W.supportsDescriptors,st=Object.getOwnPropertyDescriptor,bt=TypeError,gt=function(){if(!dt){throw new bt("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors")}if("gim"===/a/gim.flags){var t=st(RegExp.prototype,"flags");if(t&&"function"==typeof t.get&&"boolean"==typeof/a/.dotAll){return t.get}}return ut},vt=W.supportsDescriptors,ht=Object.getOwnPropertyDescriptor,mt=Object.defineProperty,At=TypeError,St=Object.getPrototypeOf,Pt=/a/,jt={},Ot=Q(ut);W(Ot,{getPolyfill:gt,implementation:ut,shim:function(){if(!vt||!St){throw new At("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors")}var t=gt(),e=St(Pt),r=ht(e,"flags");return r&&r.get===t||mt(e,"flags",{configurable:!0,enumerable:!1,get:t}),t}}),jt=Ot;var wt=Date.prototype.getDay,Et=Object.prototype.toString,It="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,Ft=function(t){return"object"==typeof t&&null!==t&&(It?function(t){try{return wt.call(t),!0}catch(o){return!1}}(t):"[object Date]"===Et.call(t))},Ut=Date.prototype.getTime;function kt(t){return null==t}function xt(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||t.length>0&&"number"!=typeof t[0])}var Rt,Dt=function t(e,r,n){var i=n||{};return!(i.strict?!k(e,r):e!==r)||(!e||!r||"object"!=typeof e&&"object"!=typeof r?i.strict?k(e,r):e==r:function(e,r,n){var i,p;if(typeof e!=typeof r){return!1}if(kt(e)||kt(r)){return!1}if(e.prototype!==r.prototype){return!1}if(j(e)!==j(r)){return!1}var y=N(e),a=N(r);if(y!==a){return!1}if(y||a){return e.source===r.source&&jt(e)===jt(r)}if(Ft(e)&&Ft(r)){return Ut.call(e)===Ut.call(r)}var f=xt(e),c=xt(r);if(f!==c){return!1}if(f||c){if(e.length!==r.length){return!1}for(i=0;i<e.length;i++){if(e[i]!==r[i]){return!1}}return!0}if(typeof e!=typeof r){return!1}try{var l=v(e),u=v(r)}catch(o){return!1}if(l.length!==u.length){return!1}for(l.sort(),u.sort(),i=l.length-1;i>=0;i--){if(l[i]!=u[i]){return!1}}for(i=l.length-1;i>=0;i--){if(!t(e[p=l[i]],r[p],n)){return!1}}return!0}(e,r,i))},$t=function(t,e,r,o){if(r===void 0)r=[];var n="string"==typeof r[r.length-1];if(Dt(t,e)){return[]}if(void 0===e){return(i={p:r})[n?"od":"ld"]=t,[i]}if(void 0===t){return(i={p:r})[n?"oi":"li"]=e,[i]}if(o&&"string"==typeof t&&"string"==typeof e){return Rt||(Rt=new o),function(t,e,r,o,n){var i=[];var p=n.patch_make(e,r);return Object.keys(p).forEach(function(e){var r=p[e],n=r.start1;r.diffs.forEach(function(ref){var e=ref[0];var r=ref[1];switch(e){case o.DIFF_DELETE:i.push({sd:r,p:t.concat([n])});break;case o.DIFF_INSERT:i.push({si:r,p:t.concat([n])});case o.DIFF_EQUAL:n+=r.length;break;default:throw Error("Unsupported operation type: "+e)}})}),i}(r,t,e,o,Rt)}var i,p=["string","number","boolean"];if(p.includes(typeof e)||p.includes(typeof t)){return(i={p:r})[n?"od":"ld"]=t,i[n?"oi":"li"]=e,[i]}if(Array.isArray(e)){for(var y=[],a=Math.max(t.length,e.length),f=(y=[],0),c=0;c<a;++c){$t(t[c],e[c],r.concat([c+f]),o).forEach(function(t){var e=t.p.slice(0,-1);Dt(r,e)&&("li"in t&&f++,"ld"in t&&f--),y.push(t)})}return y}return y=[],new Set(Object.keys(t).concat(Object.keys(e))).forEach(function(n){var i=$t(t[n],e[n],r.concat([n]),o);y=y.concat(i)}),y};return e.m["json0-ot-diff"]=function(t,e,r){return function(t){for(var e=0,r=t.length-1;e<r;++e){var o=t[e],n=t[e+1];Dt(o.p.slice(0,-1),n.p.slice(0,-1))&&o.p[o.p.length-1]+1===n.p[n.p.length-1]&&o.li&&n.ld&&Dt(o.li,n.ld)&&(delete o.li,delete n.ld)}return t.filter(function(t){return Object.keys(t).length>1})}($t(t,e,[],r))},e}("function"==typeof require?require:void 0);
require=function(t){var e=function e(n,r){return e.m.hasOwnProperty(n)?e.m[n]:"function"!=typeof t||r?"function"==typeof e.r?e.r(n,1):void 0:t(n,1)};e.m={},e.r=t;var n={};function r(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}return r.Diff,r.prototype.diff_main=function(t,e,n,r){void 0===r&&(r=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var i=r;if(null==t||null==e)throw new Error("Null input. (diff_main)");if(t==e)return t?[[0,t]]:[];void 0===n&&(n=!0);var h=n,s=this.diff_commonPrefix(t,e),a=t.substring(0,s);t=t.substring(s),e=e.substring(s),s=this.diff_commonSuffix(t,e);var f=t.substring(t.length-s);t=t.substring(0,t.length-s),e=e.substring(0,e.length-s);var l=this.diff_compute_(t,e,h,i);return a&&l.unshift([0,a]),f&&l.push([0,f]),this.diff_cleanupMerge(l),l},r.prototype.diff_compute_=function(t,e,n,r){var i;if(!t)return[[1,e]];if(!e)return[[-1,t]];var h=t.length>e.length?t:e,s=t.length>e.length?e:t,a=h.indexOf(s);if(-1!=a)return i=[[1,h.substring(0,a)],[0,s],[1,h.substring(a+s.length)]],t.length>e.length&&(i[0][0]=i[2][0]=-1),i;if(1==s.length)return[[-1,t],[1,e]];var f=this.diff_halfMatch_(t,e);if(f){var l=f[0],g=f[1],o=f[2],c=f[3],u=f[4],p=this.diff_main(l,o,n,r),d=this.diff_main(g,c,n,r);return p.concat([[0,u]],d)}return n&&t.length>100&&e.length>100?this.diff_lineMode_(t,e,r):this.diff_bisect_(t,e,r)},r.prototype.diff_lineMode_=function(t,e,n){t=(g=this.diff_linesToChars_(t,e)).chars1,e=g.chars2;var r=g.lineArray,i=this.diff_main(t,e,!1,n);this.diff_charsToLines_(i,r),this.diff_cleanupSemantic(i),i.push([0,""]);for(var h=0,s=0,a=0,f="",l="";h<i.length;){switch(i[h][0]){case 1:a++,l+=i[h][1];break;case-1:s++,f+=i[h][1];break;case 0:if(s>=1&&a>=1){i.splice(h-s-a,s+a),h=h-s-a;for(var g,o=(g=this.diff_main(f,l,!1,n)).length-1;o>=0;o--)i.splice(h,0,g[o]);h+=g.length}a=0,s=0,f="",l=""}h++}return i.pop(),i},r.prototype.diff_bisect_=function(t,e,n){for(var r=t.length,i=e.length,h=Math.ceil((r+i)/2),s=h,a=2*h,f=new Array(a),l=new Array(a),g=0;g<a;g++)f[g]=-1,l[g]=-1;f[s+1]=0,l[s+1]=0;for(var o=r-i,c=o%2!=0,u=0,p=0,d=0,_=0,b=0;b<h&&!((new Date).getTime()>n);b++){for(var v=-b+u;v<=b-p;v+=2){for(var m=s+v,M=(k=v==-b||v!=b&&f[m-1]<f[m+1]?f[m+1]:f[m-1]+1)-v;k<r&&M<i&&t.charAt(k)==e.charAt(M);)k++,M++;if(f[m]=k,k>r)p+=2;else if(M>i)u+=2;else if(c&&(w=s+o-v)>=0&&w<a&&-1!=l[w]&&k>=(y=r-l[w]))return this.diff_bisectSplit_(t,e,k,M,n)}for(var x=-b+d;x<=b-_;x+=2){for(var y,w=s+x,A=(y=x==-b||x!=b&&l[w-1]<l[w+1]?l[w+1]:l[w-1]+1)-x;y<r&&A<i&&t.charAt(r-y-1)==e.charAt(i-A-1);)y++,A++;if(l[w]=y,y>r)_+=2;else if(A>i)d+=2;else if(!c){var k;if((m=s+o-x)>=0&&m<a&&-1!=f[m])if(M=s+(k=f[m])-m,k>=(y=r-y))return this.diff_bisectSplit_(t,e,k,M,n)}}}return[[-1,t],[1,e]]},r.prototype.diff_bisectSplit_=function(t,e,n,r,i){var h=t.substring(0,n),s=e.substring(0,r),a=t.substring(n),f=e.substring(r),l=this.diff_main(h,s,!1,i),g=this.diff_main(a,f,!1,i);return l.concat(g)},r.prototype.diff_linesToChars_=function(t,e){var n=[],r={};function i(t){for(var e="",i=0,h=-1,s=n.length;h<t.length-1;){-1==(h=t.indexOf("\n",i))&&(h=t.length-1);var a=t.substring(i,h+1);i=h+1,(r.hasOwnProperty?r.hasOwnProperty(a):void 0!==r[a])?e+=String.fromCharCode(r[a]):(e+=String.fromCharCode(s),r[a]=s,n[s++]=a)}return e}return n[0]="",{chars1:i(t),chars2:i(e),lineArray:n}},r.prototype.diff_charsToLines_=function(t,e){for(var n=0;n<t.length;n++){for(var r=t[n][1],i=[],h=0;h<r.length;h++)i[h]=e[r.charCodeAt(h)];t[n][1]=i.join("")}},r.prototype.diff_commonPrefix=function(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var n=0,r=Math.min(t.length,e.length),i=r,h=0;n<i;)t.substring(h,i)==e.substring(h,i)?h=n=i:r=i,i=Math.floor((r-n)/2+n);return i},r.prototype.diff_commonSuffix=function(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var n=0,r=Math.min(t.length,e.length),i=r,h=0;n<i;)t.substring(t.length-i,t.length-h)==e.substring(e.length-i,e.length-h)?h=n=i:r=i,i=Math.floor((r-n)/2+n);return i},r.prototype.diff_commonOverlap_=function(t,e){var n=t.length,r=e.length;if(0==n||0==r)return 0;n>r?t=t.substring(n-r):n<r&&(e=e.substring(0,n));var i=Math.min(n,r);if(t==e)return i;for(var h=0,s=1;;){var a=t.substring(i-s),f=e.indexOf(a);if(-1==f)return h;s+=f,0!=f&&t.substring(i-s)!=e.substring(0,s)||(h=s,s++)}},r.prototype.diff_halfMatch_=function(t,e){if(this.Diff_Timeout<=0)return null;var n=t.length>e.length?t:e,r=t.length>e.length?e:t;if(n.length<4||2*r.length<n.length)return null;var i=this;function h(t,e,n){for(var r,h,s,a,f=t.substring(n,n+Math.floor(t.length/4)),l=-1,g="";-1!=(l=e.indexOf(f,l+1));){var o=i.diff_commonPrefix(t.substring(n),e.substring(l)),c=i.diff_commonSuffix(t.substring(0,n),e.substring(0,l));g.length<c+o&&(g=e.substring(l-c,l)+e.substring(l,l+o),r=t.substring(0,n-c),h=t.substring(n+o),s=e.substring(0,l-c),a=e.substring(l+o))}return 2*g.length>=t.length?[r,h,s,a,g]:null}var s,a,f,l,g,o=h(n,r,Math.ceil(n.length/4)),c=h(n,r,Math.ceil(n.length/2));return o||c?(s=c?o&&o[4].length>c[4].length?o:c:o,t.length>e.length?(a=s[0],f=s[1],l=s[2],g=s[3]):(l=s[0],g=s[1],a=s[2],f=s[3]),[a,f,l,g,s[4]]):null},r.prototype.diff_cleanupSemantic=function(t){for(var e=!1,n=[],r=0,i=null,h=0,s=0,a=0,f=0,l=0;h<t.length;)0==t[h][0]?(n[r++]=h,s=f,a=l,f=0,l=0,i=t[h][1]):(1==t[h][0]?f+=t[h][1].length:l+=t[h][1].length,i&&i.length<=Math.max(s,a)&&i.length<=Math.max(f,l)&&(t.splice(n[r-1],0,[-1,i]),t[n[r-1]+1][0]=1,r--,h=--r>0?n[r-1]:-1,s=0,a=0,f=0,l=0,i=null,e=!0)),h++;for(e&&this.diff_cleanupMerge(t),this.diff_cleanupSemanticLossless(t),h=1;h<t.length;){if(-1==t[h-1][0]&&1==t[h][0]){var g=t[h-1][1],o=t[h][1],c=this.diff_commonOverlap_(g,o),u=this.diff_commonOverlap_(o,g);c>=u?(c>=g.length/2||c>=o.length/2)&&(t.splice(h,0,[0,o.substring(0,c)]),t[h-1][1]=g.substring(0,g.length-c),t[h+1][1]=o.substring(c),h++):(u>=g.length/2||u>=o.length/2)&&(t.splice(h,0,[0,g.substring(0,u)]),t[h-1][0]=1,t[h-1][1]=o.substring(0,o.length-u),t[h+1][0]=-1,t[h+1][1]=g.substring(u),h++),h++}h++}},r.prototype.diff_cleanupSemanticLossless=function(t){function e(t,e){if(!t||!e)return 6;var n=t.charAt(t.length-1),i=e.charAt(0),h=n.match(r.nonAlphaNumericRegex_),s=i.match(r.nonAlphaNumericRegex_),a=h&&n.match(r.whitespaceRegex_),f=s&&i.match(r.whitespaceRegex_),l=a&&n.match(r.linebreakRegex_),g=f&&i.match(r.linebreakRegex_),o=l&&t.match(r.blanklineEndRegex_),c=g&&e.match(r.blanklineStartRegex_);return o||c?5:l||g?4:h&&!a&&f?3:a||f?2:h||s?1:0}for(var n=1;n<t.length-1;){if(0==t[n-1][0]&&0==t[n+1][0]){var i=t[n-1][1],h=t[n][1],s=t[n+1][1],a=this.diff_commonSuffix(i,h);if(a){var f=h.substring(h.length-a);i=i.substring(0,i.length-a),h=f+h.substring(0,h.length-a),s=f+s}for(var l=i,g=h,o=s,c=e(i,h)+e(h,s);h.charAt(0)===s.charAt(0);){i+=h.charAt(0),h=h.substring(1)+s.charAt(0),s=s.substring(1);var u=e(i,h)+e(h,s);u>=c&&(c=u,l=i,g=h,o=s)}t[n-1][1]!=l&&(l?t[n-1][1]=l:(t.splice(n-1,1),n--),t[n][1]=g,o?t[n+1][1]=o:(t.splice(n+1,1),n--))}n++}},r.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,r.whitespaceRegex_=/\s/,r.linebreakRegex_=/[\r\n]/,r.blanklineEndRegex_=/\n\r?\n$/,r.blanklineStartRegex_=/^\r?\n\r?\n/,r.prototype.diff_cleanupEfficiency=function(t){for(var e=!1,n=[],r=0,i=null,h=0,s=!1,a=!1,f=!1,l=!1;h<t.length;)0==t[h][0]?(t[h][1].length<this.Diff_EditCost&&(f||l)?(n[r++]=h,s=f,a=l,i=t[h][1]):(r=0,i=null),f=l=!1):(-1==t[h][0]?l=!0:f=!0,i&&(s&&a&&f&&l||i.length<this.Diff_EditCost/2&&s+a+f+l==3)&&(t.splice(n[r-1],0,[-1,i]),t[n[r-1]+1][0]=1,r--,i=null,s&&a?(f=l=!0,r=0):(h=--r>0?n[r-1]:-1,f=l=!1),e=!0)),h++;e&&this.diff_cleanupMerge(t)},r.prototype.diff_cleanupMerge=function(t){t.push([0,""]);for(var e,n=0,r=0,i=0,h="",s="";n<t.length;)switch(t[n][0]){case 1:i++,s+=t[n][1],n++;break;case-1:r++,h+=t[n][1],n++;break;case 0:r+i>1?(0!==r&&0!==i&&(0!==(e=this.diff_commonPrefix(s,h))&&(n-r-i>0&&0==t[n-r-i-1][0]?t[n-r-i-1][1]+=s.substring(0,e):(t.splice(0,0,[0,s.substring(0,e)]),n++),s=s.substring(e),h=h.substring(e)),0!==(e=this.diff_commonSuffix(s,h))&&(t[n][1]=s.substring(s.length-e)+t[n][1],s=s.substring(0,s.length-e),h=h.substring(0,h.length-e))),0===r?t.splice(n-i,r+i,[1,s]):0===i?t.splice(n-r,r+i,[-1,h]):t.splice(n-r-i,r+i,[-1,h],[1,s]),n=n-r-i+(r?1:0)+(i?1:0)+1):0!==n&&0==t[n-1][0]?(t[n-1][1]+=t[n][1],t.splice(n,1)):n++,i=0,r=0,h="",s=""}""===t[t.length-1][1]&&t.pop();var a=!1;for(n=1;n<t.length-1;)0==t[n-1][0]&&0==t[n+1][0]&&(t[n][1].substring(t[n][1].length-t[n-1][1].length)==t[n-1][1]?(t[n][1]=t[n-1][1]+t[n][1].substring(0,t[n][1].length-t[n-1][1].length),t[n+1][1]=t[n-1][1]+t[n+1][1],t.splice(n-1,1),a=!0):t[n][1].substring(0,t[n+1][1].length)==t[n+1][1]&&(t[n-1][1]+=t[n+1][1],t[n][1]=t[n][1].substring(t[n+1][1].length)+t[n+1][1],t.splice(n+1,1),a=!0)),n++;a&&this.diff_cleanupMerge(t)},r.prototype.diff_xIndex=function(t,e){var n,r=0,i=0,h=0,s=0;for(n=0;n<t.length&&(1!==t[n][0]&&(r+=t[n][1].length),-1!==t[n][0]&&(i+=t[n][1].length),!(r>e));n++)h=r,s=i;return t.length!=n&&-1===t[n][0]?s:s+(e-h)},r.prototype.diff_prettyHtml=function(t){for(var e=[],n=/&/g,r=/</g,i=/>/g,h=/\n/g,s=0;s<t.length;s++){var a=t[s][0],f=t[s][1].replace(n,"&amp;").replace(r,"&lt;").replace(i,"&gt;").replace(h,"&para;<br>");switch(a){case 1:e[s]='<ins style="background:#e6ffe6;">'+f+"</ins>";break;case-1:e[s]='<del style="background:#ffe6e6;">'+f+"</del>";break;case 0:e[s]="<span>"+f+"</span>"}}return e.join("")},r.prototype.diff_text1=function(t){for(var e=[],n=0;n<t.length;n++)1!==t[n][0]&&(e[n]=t[n][1]);return e.join("")},r.prototype.diff_text2=function(t){for(var e=[],n=0;n<t.length;n++)-1!==t[n][0]&&(e[n]=t[n][1]);return e.join("")},r.prototype.diff_levenshtein=function(t){for(var e=0,n=0,r=0,i=0;i<t.length;i++){var h=t[i][0],s=t[i][1];switch(h){case 1:n+=s.length;break;case-1:r+=s.length;break;case 0:e+=Math.max(n,r),n=0,r=0}}return e+Math.max(n,r)},r.prototype.diff_toDelta=function(t){for(var e=[],n=0;n<t.length;n++)switch(t[n][0]){case 1:e[n]="+"+encodeURI(t[n][1]);break;case-1:e[n]="-"+t[n][1].length;break;case 0:e[n]="="+t[n][1].length}return e.join("\t").replace(/%20/g," ")},r.prototype.diff_fromDelta=function(t,e){for(var n=[],r=0,i=0,h=e.split(/\t/g),s=0;s<h.length;s++){var a=h[s].substring(1);switch(h[s].charAt(0)){case"+":try{n[r++]=[1,decodeURI(a)]}catch(g){throw new Error("Illegal escape in diff_fromDelta: "+a)}break;case"-":case"=":var f=parseInt(a,10);if(isNaN(f)||f<0)throw new Error("Invalid number in diff_fromDelta: "+a);var l=t.substring(i,i+=f);"="==h[s].charAt(0)?n[r++]=[0,l]:n[r++]=[-1,l];break;default:if(h[s])throw new Error("Invalid diff operation in diff_fromDelta: "+h[s])}}if(i!=t.length)throw new Error("Delta length ("+i+") does not equal source text length ("+t.length+").");return n},r.prototype.match_main=function(t,e,n){if(null==t||null==e||null==n)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,t.length)),t==e?0:t.length?t.substring(n,n+e.length)==e?n:this.match_bitap_(t,e,n):-1},r.prototype.match_bitap_=function(t,e,n){if(e.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var r=this.match_alphabet_(e),i=this;function h(t,r){var h=t/e.length,s=Math.abs(n-r);return i.Match_Distance?h+s/i.Match_Distance:s?1:h}var s=this.Match_Threshold,a=t.indexOf(e,n);-1!=a&&(s=Math.min(h(0,a),s),-1!=(a=t.lastIndexOf(e,n+e.length))&&(s=Math.min(h(0,a),s)));var f,l,g=1<<e.length-1;a=-1;for(var o,c=e.length+t.length,u=0;u<e.length;u++){for(f=0,l=c;f<l;)h(u,n+l)<=s?f=l:c=l,l=Math.floor((c-f)/2+f);c=l;var p=Math.max(1,n-l+1),d=Math.min(n+l,t.length)+e.length,_=Array(d+2);_[d+1]=(1<<u)-1;for(var b=d;b>=p;b--){var v=r[t.charAt(b-1)];if(_[b]=0===u?(_[b+1]<<1|1)&v:(_[b+1]<<1|1)&v|(o[b+1]|o[b])<<1|1|o[b+1],_[b]&g){var m=h(u,b-1);if(m<=s){if(s=m,!((a=b-1)>n))break;p=Math.max(1,2*n-a)}}}if(h(u+1,n)>s)break;o=_}return a},r.prototype.match_alphabet_=function(t){for(var e={},n=0;n<t.length;n++)e[t.charAt(n)]=0;for(n=0;n<t.length;n++)e[t.charAt(n)]|=1<<t.length-n-1;return e},r.prototype.patch_addContext_=function(t,e){if(0!=e.length){for(var n=e.substring(t.start2,t.start2+t.length1),r=0;e.indexOf(n)!=e.lastIndexOf(n)&&n.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)r+=this.Patch_Margin,n=e.substring(t.start2-r,t.start2+t.length1+r);r+=this.Patch_Margin;var i=e.substring(t.start2-r,t.start2);i&&t.diffs.unshift([0,i]);var h=e.substring(t.start2+t.length1,t.start2+t.length1+r);h&&t.diffs.push([0,h]),t.start1-=i.length,t.start2-=i.length,t.length1+=i.length+h.length,t.length2+=i.length+h.length}},r.prototype.patch_make=function(t,e,n){var i,h;if("string"==typeof t&&"string"==typeof e&&void 0===n)i=t,(h=this.diff_main(i,e,!0)).length>2&&(this.diff_cleanupSemantic(h),this.diff_cleanupEfficiency(h));else if(t&&"object"==typeof t&&void 0===e&&void 0===n)h=t,i=this.diff_text1(h);else if("string"==typeof t&&e&&"object"==typeof e&&void 0===n)i=t,h=e;else{if("string"!=typeof t||"string"!=typeof e||!n||"object"!=typeof n)throw new Error("Unknown call format to patch_make.");i=t,h=n}if(0===h.length)return[];for(var s=[],a=new r.patch_obj,f=0,l=0,g=0,o=i,c=i,u=0;u<h.length;u++){var p=h[u][0],d=h[u][1];switch(f||0===p||(a.start1=l,a.start2=g),p){case 1:a.diffs[f++]=h[u],a.length2+=d.length,c=c.substring(0,g)+d+c.substring(g);break;case-1:a.length1+=d.length,a.diffs[f++]=h[u],c=c.substring(0,g)+c.substring(g+d.length);break;case 0:d.length<=2*this.Patch_Margin&&f&&h.length!=u+1?(a.diffs[f++]=h[u],a.length1+=d.length,a.length2+=d.length):d.length>=2*this.Patch_Margin&&f&&(this.patch_addContext_(a,o),s.push(a),a=new r.patch_obj,f=0,o=c,l=g)}1!==p&&(l+=d.length),-1!==p&&(g+=d.length)}return f&&(this.patch_addContext_(a,o),s.push(a)),s},r.prototype.patch_deepCopy=function(t){for(var e=[],n=0;n<t.length;n++){var i=t[n],h=new r.patch_obj;h.diffs=[];for(var s=0;s<i.diffs.length;s++)h.diffs[s]=i.diffs[s].slice();h.start1=i.start1,h.start2=i.start2,h.length1=i.length1,h.length2=i.length2,e[n]=h}return e},r.prototype.patch_apply=function(t,e){if(0==t.length)return[e,[]];t=this.patch_deepCopy(t);var n=this.patch_addPadding(t);e=n+e+n,this.patch_splitMax(t);for(var r=0,i=[],h=0;h<t.length;h++){var s,a,f=t[h].start2+r,l=this.diff_text1(t[h].diffs),g=-1;if(l.length>this.Match_MaxBits?-1!=(s=this.match_main(e,l.substring(0,this.Match_MaxBits),f))&&(-1==(g=this.match_main(e,l.substring(l.length-this.Match_MaxBits),f+l.length-this.Match_MaxBits))||s>=g)&&(s=-1):s=this.match_main(e,l,f),-1==s)i[h]=!1,r-=t[h].length2-t[h].length1;else if(i[h]=!0,r=s-f,l==(a=-1==g?e.substring(s,s+l.length):e.substring(s,g+this.Match_MaxBits)))e=e.substring(0,s)+this.diff_text2(t[h].diffs)+e.substring(s+l.length);else{var o=this.diff_main(l,a,!1);if(l.length>this.Match_MaxBits&&this.diff_levenshtein(o)/l.length>this.Patch_DeleteThreshold)i[h]=!1;else{this.diff_cleanupSemanticLossless(o);for(var c,u=0,p=0;p<t[h].diffs.length;p++){var d=t[h].diffs[p];0!==d[0]&&(c=this.diff_xIndex(o,u)),1===d[0]?e=e.substring(0,s+c)+d[1]+e.substring(s+c):-1===d[0]&&(e=e.substring(0,s+c)+e.substring(s+this.diff_xIndex(o,u+d[1].length))),-1!==d[0]&&(u+=d[1].length)}}}}return[e=e.substring(n.length,e.length-n.length),i]},r.prototype.patch_addPadding=function(t){for(var e=this.Patch_Margin,n="",r=1;r<=e;r++)n+=String.fromCharCode(r);for(r=0;r<t.length;r++)t[r].start1+=e,t[r].start2+=e;var i=t[0],h=i.diffs;if(0==h.length||0!=h[0][0])h.unshift([0,n]),i.start1-=e,i.start2-=e,i.length1+=e,i.length2+=e;else if(e>h[0][1].length){var s=e-h[0][1].length;h[0][1]=n.substring(h[0][1].length)+h[0][1],i.start1-=s,i.start2-=s,i.length1+=s,i.length2+=s}return 0==(h=(i=t[t.length-1]).diffs).length||0!=h[h.length-1][0]?(h.push([0,n]),i.length1+=e,i.length2+=e):e>h[h.length-1][1].length&&(s=e-h[h.length-1][1].length,h[h.length-1][1]+=n.substring(0,s),i.length1+=s,i.length2+=s),n},r.prototype.patch_splitMax=function(t){for(var e=this.Match_MaxBits,n=0;n<t.length;n++)if(!(t[n].length1<=e)){var i=t[n];t.splice(n--,1);for(var h=i.start1,s=i.start2,a="";0!==i.diffs.length;){var f=new r.patch_obj,l=!0;for(f.start1=h-a.length,f.start2=s-a.length,""!==a&&(f.length1=f.length2=a.length,f.diffs.push([0,a]));0!==i.diffs.length&&f.length1<e-this.Patch_Margin;){var g=i.diffs[0][0],o=i.diffs[0][1];1===g?(f.length2+=o.length,s+=o.length,f.diffs.push(i.diffs.shift()),l=!1):-1===g&&1==f.diffs.length&&0==f.diffs[0][0]&&o.length>2*e?(f.length1+=o.length,h+=o.length,l=!1,f.diffs.push([g,o]),i.diffs.shift()):(o=o.substring(0,e-f.length1-this.Patch_Margin),f.length1+=o.length,h+=o.length,0===g?(f.length2+=o.length,s+=o.length):l=!1,f.diffs.push([g,o]),o==i.diffs[0][1]?i.diffs.shift():i.diffs[0][1]=i.diffs[0][1].substring(o.length))}a=(a=this.diff_text2(f.diffs)).substring(a.length-this.Patch_Margin);var c=this.diff_text1(i.diffs).substring(0,this.Patch_Margin);""!==c&&(f.length1+=c.length,f.length2+=c.length,0!==f.diffs.length&&0===f.diffs[f.diffs.length-1][0]?f.diffs[f.diffs.length-1][1]+=c:f.diffs.push([0,c])),l||t.splice(++n,0,f)}}},r.prototype.patch_toText=function(t){for(var e=[],n=0;n<t.length;n++)e[n]=t[n];return e.join("")},r.prototype.patch_fromText=function(t){var e=[];if(!t)return e;for(var n=t.split("\n"),i=0,h=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;i<n.length;){var s=n[i].match(h);if(!s)throw new Error("Invalid patch string: "+n[i]);var a=new r.patch_obj;for(e.push(a),a.start1=parseInt(s[1],10),""===s[2]?(a.start1--,a.length1=1):"0"==s[2]?a.length1=0:(a.start1--,a.length1=parseInt(s[2],10)),a.start2=parseInt(s[3],10),""===s[4]?(a.start2--,a.length2=1):"0"==s[4]?a.length2=0:(a.start2--,a.length2=parseInt(s[4],10)),i++;i<n.length;){var f=n[i].charAt(0);try{var l=decodeURI(n[i].substring(1))}catch(g){throw new Error("Illegal escape in patch_fromText: "+l)}if("-"==f)a.diffs.push([-1,l]);else if("+"==f)a.diffs.push([1,l]);else if(" "==f)a.diffs.push([0,l]);else{if("@"==f)break;if(""!==f)throw new Error('Invalid patch mode "'+f+'" in: '+l)}i++}}return e},r.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},r.patch_obj.prototype.toString=function(){for(var t,e=["@@ -"+(0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],n=0;n<this.diffs.length;n++){switch(this.diffs[n][0]){case 1:t="+";break;case-1:t="-";break;case 0:t=" "}e[n+1]=t+encodeURI(this.diffs[n][1])+"\n"}return e.join("").replace(/%20/g," ")},(n=r).diff_match_patch=r,n.DIFF_DELETE=-1,n.DIFF_INSERT=1,n.DIFF_EQUAL=0,e.m["diff-match-patch"]=n,e}("function"==typeof require?require:void 0);
var otJson0,json0OtDiff,diffMatchPatch;otJson0=require("ot-json0");json0OtDiff=require("json0-ot-diff");diffMatchPatch=require("diff-match-patch");(function(){var ctrlz;ctrlz=function(opt){opt==null&&(opt={});this.cur=opt.obj||{};this.idx=0;this.stack=[];return this};ctrlz.prototype=import$(Object.create(Object.prototype),{clear:function(){this.idx=0;return this.stack.splice(0)},reset:function(arg$){var obj;obj=arg$.obj;return this.cur=obj,this.idx=0,this.stack=[],this},update:function(obj){return this.apply({obj:obj})},apply:function(arg$){var obj,op;obj=arg$.obj,op=arg$.op;if(!op&&obj){op=json0OtDiff(this.cur,obj,diffMatchPatch)}if(this.idx<this.stack.length-1){this.stack.splice(this.idx)}this.stack.push(op);this.cur=otJson0.type.apply(this.cur,op);this.idx=this.stack.length-1;return this.cur},undo:function(){var op;if(this.idx===-1){return this.cur}op=this.stack[this.idx];this.cur=otJson0.type.apply(this.cur,otJson0.type.invert(op));this.idx--;return this.cur},redo:function(){var op;if(this.idx>=this.stack.length-1){return this.cur}this.idx++;op=this.stack[this.idx];this.cur=otJson0.type.apply(this.cur,op);return this.cur}});if(typeof module!="undefined"&&module!==null){module.exports=ctrlz}if(typeof window!="undefined"&&window!==null){return window.ctrlz=ctrlz}})();function import$(obj,src){var own={}.hasOwnProperty;for(var key in src)if(own.call(src,key))obj[key]=src[key];return obj}
